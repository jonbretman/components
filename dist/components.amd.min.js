define(["exports"],function(a){"use strict";function b(a){return Object.prototype.toString.call(a).match(/\[object (.*?)\]/)[1].toLowerCase()}function c(a){return"object"===b(a)}function d(a){return"function"===b(a)}function e(a){return a&&(1===a.nodeType||9===a.nodeType)}function f(a){return"string"===b(a)}function g(){return this}function h(a){return a.replace(/\-(.)/g,function(a,b){return b.toUpperCase()})}function i(a,b){return a?a.querySelectorAll(b):[]}function j(a){return a&&a.length?E.call(a):[]}function k(a){return E.call(arguments,1).forEach(function(b){if(c(b))for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}),a}function l(a,b){for(;a&&a!==D.body;){if(m(a,b))return a;a=a.parentElement}return null}function m(a,b){var c="MatchesSelector",d=a["webkit"+c]||a["moz"+c]||a["ms"+c]||a["o"+c]||a.matchesSelector||a.matches;return d.call(a,b)}function n(a){var b=[];if(a===C||a===D)return[];for(;e(a);)r(a)&&b.push(a),a=a.parentElement;return b}function o(a){return r(a)?a:null}function p(a,b){var c,e=E.call(arguments,2),f=0;if(r(a)&&(a=[a]),!a)return this;for(c=a.length;c>f;f++)d(a[f][b])&&a[f][b].apply(a[f],e);return this}function q(a){for(var b,c,d={},e=0;e<a.attributes.length;e++){b=h(a.attributes[e].name),c=a.attributes[e].value;try{c=JSON.parse(c)}catch(f){}d[b]=c}return d}function r(a){return e(a)&&!!a.getAttribute("is")}function s(a,b){var c,d,e,f,g,h,i,j,k,m,o,p=a.target,q=r(p),s=q?p.getAttribute("is"):null,t=a.type;for(b||(b=n(q?p.el:p)),j=0,m=b.length;m>j;j++)if(c=b[j],d=c._events)for(k=0,o=d.length;o>k;k++)g=d[k][0],f=d[k][1],h=d[k][2],g===t&&(f?q?f===s&&h.call(c,a):(e=l(p,f),e&&h.call(c,a,e)):h.call(c,a));if(i=K[t])for(j=0,m=i.length;m>j;j++)i[j].fn.call(i[j].ctx,a,D.body)}function t(a,b){var c,d,e={};return b=b||{},"extends"in b?(c=M[b["extends"]],e["extends"]=b["extends"]):(c=HTMLElement.prototype,e["extends"]="div"),d=Object.create(c),Object.keys(N).forEach(function(a){d[a]=N[a]}),Object.keys(b).forEach(function(a){"extends"!==a&&(d[a]=b[a])}),e.prototype=d,document.registerElement(a,e)}function u(a){var b,c;for(b in L)c=-1!==["resize","scroll"].indexOf(b)?window:D.body,c[a](b,s,!!L[b])}function v(){u("addEventListener")}function w(){u("removeEventListener")}function x(a){a=a||{},a.domQuery&&(H=a.domQuery),a.domWrapper&&(I=a.domWrapper),v()}function y(){E.call(J).forEach(function(a){a.destroy()}),H=i,I=j,w()}function z(a){return A(a)[0]}function A(a){return J.filter(function(b){return b.getAttribute("is")===a})}function B(a){return A(a).forEach(function(a){a.destroy()}),this}if("undefined"==typeof window)throw new Error("components requires an environment with a window");var C=window,D=C.document,E=[].slice,F=[].filter,G=[].map,H=i,I=j,J=[],K={},L={click:!1,dblclick:!1,mousedown:!1,mouseup:!1,mousemove:!1,mouseleave:!0,mouseenter:!0,touchstart:!1,touchmove:!1,touchend:!1,keyup:!1,keydown:!1,error:!0,blur:!0,focus:!0,scroll:!0,submit:!0,change:!0,resize:!0,load:!0};a.fromElement=o,a.isComponent=r,a.handleEvent=s;var M={a:HTMLElement.prototype,form:HTMLFormElement.prototype,input:HTMLInputElement.prototype,select:HTMLSelectElement.prototype};a.register=t,a.bindEvents=v,a.unbindEvents=w,a.init=x,a.reset=y,a.getInstanceOf=z,a.getInstancesOf=A,a.destroy=B;var N={createdCallback:function(){J.push(this),this._events=[],this.el=this,this.$el=I([this]),this.opts=k({},d(this.defaultOptions)?this.defaultOptions():this.defaultOptions,q(this)),this.init(),this.setupEvents(this.registerEvent.bind(this)),this.render()},attachedCallback:function(){this.onInsert(),this.emit("inserted")},detachedCallback:function(){this.onRemove()},setOptions:function(a){return k(this.opts,a),this},template:null,init:g,setupEvents:g,render:function(){var a=this.template,b=d(a),c=f(a);return(b||c)&&(this.innerHTML=b?a.call(this,this):a),this},emit:function(a,b,c){b=b||{},b.target=b.target||this,b.type=a,b.customEvent=!0,s(b,c)},insertBefore:function(a){if(a=e(a)?a:null,!a)return this;var b=a.parentElement;return b&&b.insertBefore(this,a),this},insertAfter:function(a){if(a=e(a)?a:null,!a)return this;var b=a.parentNode;return b&&b.insertBefore(this,a.nextSibling),this},appendTo:function(a){return e(a)?(a.appendChild(this),this):this},onInsert:g,remove:function(){return this.parentElement?(this.beforeRemove(),p(this.find("[is]"),"beforeRemove"),this.emit("remove"),this.parentElement.removeChild(this),this):this},beforeRemove:g,onRemove:g,beforeDestroy:g,destroy:function(){var a=this;return this.beforeDestroy(),p(this.find("[is]"),"beforeDestroy"),this.remove(),J=J.filter(function(b){return b!==a}),null},find:function(a){return I(H(this,a))},findComponent:function(a){return o(this.find("[is="+a+"]")[0])},findComponents:function(a){return G.call(this.find("[is="+a+"]"),o)},invoke:p,registerEvent:function(a,b,c){return 2===arguments.length&&(c=b,b=null),this._events.push([a,b,c]),this},releaseEvent:function(a,b,c){d(b)&&!c&&(c=b,b=null),d(c)||(c=null),"undefined"==typeof b&&(b=null),this._events=F.call(this._events,function(d){var e=d[0],f=d[1],g=d[2];return c?!(e===a&&f===b&&g===c):!(e===a&&f===b)})},setGlobalHandler:function(a,b){return K[a]=K[a]||[],K[a].push({fn:b,ctx:this}),this},releaseGlobalHandler:function(a,b){var c=K[a],d=this;return c?(K[a]=F.call(c,function(a){return a.fn!==b||a.ctx!==d}),this):this}}});